// PhotoFlare Pages - Feed (Home)
// ===============================

// ==========================================
// FEED LAYOUT
// ==========================================

.pf-feed-page {
  min-height: calc(100vh - var(--pf-navbar-height));
  background: var(--pf-bg-primary);
  padding: var(--pf-space-6) var(--pf-space-4);
}

.pf-feed-container {
  max-width: 935px;
  margin: 0 auto;
  display: flex;
  gap: var(--pf-space-8);
  justify-content: center;
}

.pf-feed-main {
  width: 100%;
  max-width: 470px;
  flex-shrink: 0;
}

.pf-feed-sidebar {
  width: 320px;
  flex-shrink: 0;
  position: sticky;
  top: calc(var(--pf-navbar-height) + var(--pf-space-6));
  align-self: flex-start;

  @media (max-width: 1024px) {
    display: none;
  }
}

// ==========================================
// STORIES SECTION
// ==========================================

.pf-feed-stories {
  background: var(--pf-surface);
  border: 1px solid var(--pf-border-light);
  border-radius: var(--pf-radius-xl);
  margin-bottom: var(--pf-space-6);
  padding: var(--pf-space-4);
  overflow: hidden;
}

.pf-stories-scroll {
  display: flex;
  gap: var(--pf-space-4);
  overflow-x: auto;
  scrollbar-width: none;
  scroll-behavior: smooth;
  padding: var(--pf-space-1) 0;

  &::-webkit-scrollbar {
    display: none;
  }
}

// ==========================================
// POSTS FEED
// ==========================================

.pf-posts-feed {
  display: flex;
  flex-direction: column;
  gap: var(--pf-space-6);
}

// ==========================================
// POST CARD
// ==========================================

.pf-post {
  background: var(--pf-surface);
  border: 1px solid var(--pf-border-light);
  border-radius: var(--pf-radius-xl);
  overflow: hidden;
  animation: pf-fade-in-up 0.3s ease-out;

  // Elevated effect on hover (subtle)
  transition: box-shadow var(--pf-transition-normal);

  &:hover {
    box-shadow: var(--pf-shadow-md);
  }
}

// Post Header
.pf-post-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--pf-space-3) var(--pf-space-4);
}

.pf-post-user {
  display: flex;
  align-items: center;
  gap: var(--pf-space-3);
  text-decoration: none;

  .avatar {
    width: 32px;
    height: 32px;
    border-radius: var(--pf-radius-full);
    object-fit: cover;
  }

  .info {
    display: flex;
    flex-direction: column;
  }

  .username {
    font-size: var(--pf-text-sm);
    font-weight: var(--pf-font-semibold);
    color: var(--pf-text-primary);

    &:hover {
      color: var(--pf-text-secondary);
    }
  }

  .location {
    font-size: var(--pf-text-xs);
    color: var(--pf-text-muted);
  }
}

.pf-post-menu {
  background: none;
  border: none;
  color: var(--pf-text-primary);
  cursor: pointer;
  padding: var(--pf-space-2);
  margin: calc(var(--pf-space-2) * -1);
  border-radius: var(--pf-radius-full);

  &:hover {
    background: var(--pf-surface-hover);
  }
}

// Post Images
.pf-post-images {
  position: relative;
  aspect-ratio: 1 / 1;
  background: var(--pf-bg-tertiary);

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  // Carousel controls
  .carousel-control {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 28px;
    height: 28px;
    background: rgba(255, 255, 255, 0.9);
    border: none;
    border-radius: var(--pf-radius-full);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity var(--pf-transition-fast);
    box-shadow: var(--pf-shadow-md);

    &.prev { left: var(--pf-space-3); }
    &.next { right: var(--pf-space-3); }

    i {
      font-size: 0.75rem;
      color: var(--pf-text-primary);
    }
  }

  &:hover .carousel-control {
    opacity: 1;
  }

  // Carousel indicators
  .carousel-indicators {
    position: absolute;
    bottom: var(--pf-space-4);
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 4px;

    button {
      width: 6px;
      height: 6px;
      border-radius: var(--pf-radius-full);
      background: rgba(255, 255, 255, 0.4);
      border: none;
      cursor: pointer;
      transition: all var(--pf-transition-fast);

      &.active {
        background: white;
        width: 6px;
      }
    }
  }

  // Multiple indicator
  .multi-indicator {
    position: absolute;
    top: var(--pf-space-3);
    right: var(--pf-space-3);
    color: white;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
  }
}

// Double-tap like heart
.pf-like-heart-overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;

  i {
    font-size: 80px;
    color: white;
    filter: drop-shadow(0 0 20px rgba(0, 0, 0, 0.3));
    animation: pf-like-burst 0.8s ease-out forwards;
    opacity: 0;
  }

  &.show i {
    opacity: 1;
  }
}

// Post Actions
.pf-post-actions {
  display: flex;
  align-items: center;
  padding: var(--pf-space-2) var(--pf-space-4);
  gap: var(--pf-space-4);
}

.pf-action-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: var(--pf-space-2);
  margin: calc(var(--pf-space-2) * -1);
  border-radius: var(--pf-radius-full);
  color: var(--pf-text-primary);
  transition: all var(--pf-transition-fast);

  &:hover {
    color: var(--pf-text-secondary);
    background: var(--pf-surface-hover);
  }

  &:active {
    transform: scale(0.9);
  }

  i {
    font-size: 1.5rem;
  }

  &.liked {
    color: var(--pf-error);

    i {
      animation: pf-heart-beat 0.8s ease-in-out;
    }
  }
}

.pf-action-save {
  margin-left: auto;
}

// Likes
.pf-post-likes {
  padding: 0 var(--pf-space-4);
  font-size: var(--pf-text-sm);
  font-weight: var(--pf-font-semibold);
  color: var(--pf-text-primary);
}

// Caption
.pf-post-caption {
  padding: var(--pf-space-2) var(--pf-space-4);
  font-size: var(--pf-text-sm);
  line-height: var(--pf-leading-relaxed);

  .username {
    font-weight: var(--pf-font-semibold);
    margin-right: var(--pf-space-1);
  }

  .more {
    color: var(--pf-text-muted);
    cursor: pointer;
  }
}

// Comments preview
.pf-post-comments-link {
  display: block;
  padding: 0 var(--pf-space-4);
  font-size: var(--pf-text-sm);
  color: var(--pf-text-muted);
  text-decoration: none;

  &:hover {
    color: var(--pf-text-secondary);
  }
}

// Timestamp
.pf-post-time {
  padding: var(--pf-space-2) var(--pf-space-4) var(--pf-space-3);
  font-size: 10px;
  color: var(--pf-text-muted);
  text-transform: uppercase;
  letter-spacing: var(--pf-tracking-wide);
}

// Comment form
.pf-post-comment-form {
  display: flex;
  align-items: center;
  padding: var(--pf-space-3) var(--pf-space-4);
  border-top: 1px solid var(--pf-border-light);
  gap: var(--pf-space-3);

  .emoji-btn {
    background: none;
    border: none;
    cursor: pointer;
    color: var(--pf-text-primary);
    font-size: 1.5rem;
  }

  input, textarea {
    flex: 1;
    border: none;
    background: transparent;
    font-size: var(--pf-text-sm);
    color: var(--pf-text-primary);
    resize: none;
    min-height: 20px;
    max-height: 80px;

    &::placeholder {
      color: var(--pf-text-muted);
    }

    &:focus {
      outline: none;
    }
  }

  .submit-btn {
    background: none;
    border: none;
    color: var(--pf-primary);
    font-weight: var(--pf-font-semibold);
    font-size: var(--pf-text-sm);
    cursor: pointer;
    opacity: 0.5;
    transition: opacity var(--pf-transition-fast);

    &:not(:disabled) {
      opacity: 1;

      &:hover {
        color: var(--pf-primary-dark);
      }
    }
  }
}

// ==========================================
// SIDEBAR
// ==========================================

// User profile mini
.pf-sidebar-profile {
  display: flex;
  align-items: center;
  gap: var(--pf-space-4);
  margin-bottom: var(--pf-space-6);

  img {
    width: 56px;
    height: 56px;
    border-radius: var(--pf-radius-full);
    object-fit: cover;
  }

  .info {
    flex: 1;

    .username {
      font-weight: var(--pf-font-semibold);
      font-size: var(--pf-text-sm);
      color: var(--pf-text-primary);
    }

    .name {
      font-size: var(--pf-text-sm);
      color: var(--pf-text-muted);
    }
  }

  .switch-btn {
    font-size: var(--pf-text-xs);
    font-weight: var(--pf-font-semibold);
    color: var(--pf-primary);
    background: none;
    border: none;
    cursor: pointer;

    &:hover {
      color: var(--pf-primary-dark);
    }
  }
}

// Suggestions header
.pf-suggestions-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--pf-space-4);

  h3 {
    font-size: var(--pf-text-sm);
    font-weight: var(--pf-font-semibold);
    color: var(--pf-text-muted);
    margin: 0;
  }

  a {
    font-size: var(--pf-text-xs);
    font-weight: var(--pf-font-semibold);
    color: var(--pf-text-primary);
    text-decoration: none;

    &:hover {
      color: var(--pf-text-secondary);
    }
  }
}

// Suggestion item
.pf-suggestion-item {
  display: flex;
  align-items: center;
  gap: var(--pf-space-3);
  padding: var(--pf-space-2) 0;

  img {
    width: 32px;
    height: 32px;
    border-radius: var(--pf-radius-full);
    object-fit: cover;
  }

  .info {
    flex: 1;
    min-width: 0;

    .username {
      font-weight: var(--pf-font-semibold);
      font-size: var(--pf-text-sm);
      color: var(--pf-text-primary);
      display: block;
      text-decoration: none;

      &:hover {
        color: var(--pf-text-secondary);
      }
    }

    .reason {
      font-size: var(--pf-text-xs);
      color: var(--pf-text-muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }

  .follow-btn {
    font-size: var(--pf-text-xs);
    font-weight: var(--pf-font-semibold);
    color: var(--pf-primary);
    background: none;
    border: none;
    cursor: pointer;

    &:hover {
      color: var(--pf-primary-dark);
    }
  }
}

// Footer links
.pf-sidebar-footer {
  margin-top: var(--pf-space-8);
  font-size: 11px;
  color: var(--pf-text-muted);

  .links {
    display: flex;
    flex-wrap: wrap;
    gap: var(--pf-space-1);
    margin-bottom: var(--pf-space-4);

    a {
      color: inherit;
      text-decoration: none;

      &:hover {
        text-decoration: underline;
      }

      &::after {
        content: ' Â· ';
        margin: 0 var(--pf-space-1);
      }

      &:last-child::after {
        display: none;
      }
    }
  }

  .copyright {
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
}

// ==========================================
// EMPTY FEED STATE
// ==========================================

.pf-feed-empty {
  text-align: center;
  padding: var(--pf-space-16) var(--pf-space-4);

  .icon {
    width: 80px;
    height: 80px;
    margin: 0 auto var(--pf-space-6);
    border: 2px solid var(--pf-text-primary);
    border-radius: var(--pf-radius-full);
    display: flex;
    align-items: center;
    justify-content: center;

    i {
      font-size: 2.5rem;
    }
  }

  h2 {
    font-size: var(--pf-text-xl);
    font-weight: var(--pf-font-light);
    margin-bottom: var(--pf-space-2);
  }

  p {
    color: var(--pf-text-muted);
    margin-bottom: var(--pf-space-6);
  }
}
